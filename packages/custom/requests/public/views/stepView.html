<div class="row" data-ng-controller="StepViewController">
    <div class="box box-info">

        <div ng-switch on="step.type">
            <div ng-switch-when="Approval">
                <div class="box-header">
                    <i class="fa fa-envelope"></i>
                    <h3 class="box-title"> {{step.name}} </h3>
                </div>
                <div class="box-body">
                    <div class="row">
                        <span >  <b> Step id  : </b> {{step._id}}</span>
                        <span >  <b> Type   : </b> {{step.type}}</span>  <br><br><br>
                        <b>
                            <span ng-if="step.status === 'INPROGRESS' && step.state === 'WaitingForApproval'"> waiting for {{step.values.toString()}} to approve this step</span>
                            <span ng-if="step.status === 'DEFINED'"> waiting for other steps to complete ... </span>
                        </b>
                    </div>
                </div>
                <div class="box-footer clearfix">
                        <button ng-if="step.status === 'DEFINED'" class="pull-right btn btn-default" id="askApproval" ng-click="processStep(step)">Ask for Approval <i class="fa fa-arrow-circle-right"></i></button>
                        <button ng-if="step.status === 'INPROGRESS'" class="pull-right btn btn-default" id="giveApproval" ng-click="processStep(step)">Approve <i class="fa fa-arrow-circle-right"></i></button>
                </div>
            </div>
            <div ng-switch-when="Upload">
                <div class="box-header">
                    <i class="fa fa-envelope"></i>
                    <h3 class="box-title"> {{step.name}} </h3>
                </div>
                <div class="box-body">
                    <div class="row" ng-if="step.status === 'DEFINED'">
                        <label class="col-xs-3">{{::step.name}}
                            <i title="This is a mandatory field!" class="fa fa-asterisk" ng-if="step.isMandatory === true" style="color:red"></i>
                        </label>
                        <div class="col-xs-9">
                            <mean-upload file-dest="destination" upload-callback="uploadFinished(files, step, $index)" upload-file-callback="uploadFileCallback(file)">
                            </mean-upload>
                        </div>
                    </div>
                </div>
                <div class="box-footer clearfix">
                    <button class="pull-right btn btn-default" id="sendEmail" ng-click="processStep(step)">Approve <i class="fa fa-arrow-circle-right"></i></button>
                </div>
            </div>
        </div>
    </div>
</div>